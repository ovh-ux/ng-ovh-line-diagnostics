/*! ovh-angular-line-diagnostics - 1.0.2 - 2018-08-20 */
"use strict";function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();angular.module("ovh-angular-line-diagnostics",["ovh-api-services"]),angular.module("ovh-angular-line-diagnostics").component("lineDiagnostics",{bindings:{lineNumber:"@",serviceName:"@"},templateUrl:"/ovh-angular-line-diagnostics/src/ovh-angular-line-diagnostics/ovh-angular-line-diagnostics.html",controllerAs:"$ctrl",controller:function(){function a(b,c,d,e,f,g,h,i){_classCallCheck(this,a),this.$q=c,this.$interval=b,this.$timeout=d,this.$translate=e,this.LineDiagnosticsService=f,this.LineDiagnosticFactory=g,this.Toast=h,this.constants=i,this.enumQuestions={bandwidthTestUnit:this.constants.QUESTIONS_ENUM.BANDWIDTH_TEST_UNIT,problemType:this.constants.QUESTIONS_ENUM.PROBLEM_TYPE}}return _createClass(a,[{key:"animateProgressBar",value:function(){var a=this,b=1e3,c=20,d=90;this.incidentTestProgression=0,this.progressBarCycle=this.$interval(function(){a.incidentTestProgression+c<d&&(a.incidentTestProgression=_.random(a.incidentTestProgression,a.incidentTestProgression+c))},b)}},{key:"fakeSeltTest",value:function(a){var b=this;return this.loadingFakeTest=!0,this.LineDiagnosticsService.fakeSeltTest({serviceName:this.serviceName,number:this.lineNumber},{seltResult:a}).$promise.then(function(b){console.log(a+" simulation complete :: "+b)})["catch"](function(a){console.warn(a)})["finally"](function(){b.loadingFakeTest=!1})}},{key:"runLineDiagnostic",value:function(a){var b=this,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:!1;return this.loading=!0,this.LineDiagnosticsService.getRunDiagnostic({number:this.lineNumber,serviceName:this.serviceName},a).then(function(d){return b.buildLineDiagnostic(d),b.checkDiagnosticStatus(),b.setCurrentStep(),c&&(b.currentLineDiagnostic.data.actionsDone=a.actionsDone),d},function(a){return _.isEmpty(a)||(b.Toast.error([b.$translate.instant("tools_lineDiagnostics_diagnostic_run_error"),_.get(a,"data.message","")].join(" ")),b.stopPoller()),b.$q.reject(a)})["finally"](function(){b.loading=!1,b.incidentTestProgression=100,b.progressBarCycle&&(b.$interval.cancel(b.progressBarCycle),b.progressBarCycle=null)})}},{key:"cancelLineDiagnostic",value:function(){var a=this;this.LineDiagnosticService.getCancelDiagnostic({number:this.lineNumber,serviceName:this.serviceName}).$promise["catch"](function(b){return a.Toast.error([a.$translate.instant("tools_lineDiagnostics_diagnostic_cancel_error"),_.get(b,"data.message","")].join(" ")),a.$q.reject(b)})}},{key:"getNextAction",value:function(){var a=this;return _.chain(this.currentLineDiagnostic.getActionsToDo()).filter(function(b){return!_.includes(a.currentLineDiagnostic.getActionsDone(),b)}).first().value()}},{key:"goToInvestigationStep",value:function(){this.beginDiagnostic=!1,this.startPoller(!1)}},{key:"hasFinalStepQuestions",value:function(){return this.currentLineDiagnostic.getQuestionsToAnswerByName().length>0&&0===this.getInvestigationStepQuestions().length&&!this.currentLineDiagnostic.hasQuestionToAnswer("resolvedAfterTests")}},{key:"isActionAQuestion",value:function(a){return _.includes(this.constants.STEPS.INVESTIGATION.ACTIONS_AS_QUESTIONS,a)}},{key:"getInvestigationStepQuestions",value:function(){var a=this;return _.filter(this.currentLineDiagnostic.data.toAnswer,function(b){return _.includes(a.constants.STEPS.INVESTIGATION.QUESTIONS,b.name)})}},{key:"setCurrentStep",value:function(){var a=this.constants.STEPS,b=this.constants.STATUS.END;switch(this.currentLineDiagnostic.faultType){case this.constants.FAULT_TYPES.UNKNOWN:this.beginDiagnostic=!0,this.currentStep=a.DETECTION.LABEL;break;case this.constants.FAULT_TYPES.NO_SYNCHRONIZATION:case this.constants.FAULT_TYPES.ALIGNMENT:case this.constants.FAULT_TYPES.SYNC_LOSS_OR_LOW_BANDWIDTH:this.beginDiagnostic?this.currentStep=a.DETECTION.LABEL:_.includes(b,this.currentLineDiagnostic.status)||this.hasFinalStepQuestions()?this.currentStep=a.SOLUTION_PROPOSAL.LABEL:this.currentStep=a.INVESTIGATION.LABEL;break;default:this.currentStep=a.DETECTION.LABEL}}},{key:"checkDiagnosticStatus",value:function(){this.currentLineDiagnostic.status===this.constants.STATUS.WAITING_ROBOT?this.startPoller():_.includes(_.union(this.constants.STATUS.END,this.constants.STATUS.PAUSE),this.currentLineDiagnostic.status)?this.stopPoller():this.currentLineDiagnostic.status===this.constants.STATUS.PROBLEM&&(this.stopPoller(),this.cancelLineDiagnostic())}},{key:"startPoller",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!1;this.runLineDiagnostic(this.currentLineDiagnostic.convertToRequestParams(),a)}},{key:"stopPoller",value:function(){this.LineDiagnosticsService.deletePollDiagnostic()}},{key:"buildLineDiagnostic",value:function(a){this.currentLineDiagnostic=new this.LineDiagnosticFactory(a)}},{key:"setModemUnplug",value:function(a){this.beginDiagnostic=!1,this.currentLineDiagnostic.addActionDone(a),this.startPoller(!1)}},{key:"addActionDone",value:function(a){this.actionRequired=!1,this.currentLineDiagnostic.addActionDone(a),_.isEmpty(_.difference(this.currentLineDiagnostic.getActionsToDo(),this.currentLineDiagnostic.getActionsDone()))&&this.startPoller(!0)}},{key:"showWarning",value:function(){this.actionRequired=!0}},{key:"$onInit",value:function(){var a=this,b=3e3,c={};this.currentLineDiagnostic=null,this.currentStep=this.constants.STEPS.DETECTION.LABEL,this.actionRequired=!1,this.loading=!1,this.progressBarCycle=null,this.waitingRobotAction=!1,this.loadingFakeTest=!1,"xdsl-ls148374-2"===this.serviceName&&(c={answers:{modemType:"forceAligment"}}),this.LineDiagnosticsService.loadTranslations().then(function(){a.translateReady=!0,a.animateProgressBar(),a.$timeout(function(){a.runLineDiagnostic(c)},b)},function(){a.translateReady=null})}},{key:"$onDestroy",value:function(){this.stopPoller()}}]),a}()}),angular.module("ovh-angular-line-diagnostics").constant("DIAGNOSTICS_CONSTANTS",{STEPS:{DETECTION:{LABEL:"detectionStep",ACTIONS:["unplugModem"],QUESTIONS:["modemIsSynchronized"]},INVESTIGATION:{LABEL:"investigationStep",ACTIONS:["modemIsSynchronized","modemStillSynchronized"],ACTIONS_AS_QUESTIONS:["checkFilter","checkConnectionCable"],QUESTIONS:["modemIsSynchronized","modemStillSynchronized","severalInternetConnections"]},SOLUTION_PROPOSAL:{LABEL:"solutionProposalStep"}},ROBOT_ACTION:{SELT_TEST:"seltTest"},FAULT_TYPES:{UNKNOWN:"unknown",NO_SYNCHRONIZATION:"noSync",ALIGNMENT:"alignment",SYNC_LOSS_OR_LOW_BANDWIDTH:"syncLossOrLowBandwidth"},STATUS:{END:["cancelled","connectionProblem","haveToConnectModemOnTheRightPlug","interventionRequested","resolvedAfterTests","validationRefused"],PAUSE:["init","sleeping","waitingHuman"],PROBLEM:"problem",SPECIAL:[],WAITING_ROBOT:"waitingRobot"},QUESTIONS_ENUM:{BANDWIDTH_TEST_UNIT:["Kbps","Mbps"],PROBLEM_TYPE:["lowBandwidth","syncLoss"]}}),angular.module("ovh-angular-line-diagnostics").factory("LineDiagnosticFactory",["DIAGNOSTICS_CONSTANTS",function(a){var b=["data","faultType","id","status"],c=function(){function c(a){_classCallCheck(this,c),_.forEach(b,function(b){if(!_.has(a,b))throw new Error(b+" option must be specified when creating a new LineDiagnostic")}),this.id=a.id,this.faultType=a.faultType,this.status=a.status,this.data=a.data,this.clearPreviousActionsDone()}return _createClass(c,[{key:"hasFinishAllTests",value:function(){return!_.isNull(_.get(this,"data.answers.resolvedAfterTests",null))}},{key:"clearPreviousActionsDone",value:function(){var a=this;this.data&&_.remove(this.data.actionsDone,function(b){return!_.includes(a.getActionsToDo(),b)})}},{key:"isOnSeltTest",value:function(){return _.isEqual(a.ROBOT_ACTION.SELT_TEST,_.get(this,"data.robotAction",""))}},{key:"hasSeltTestDone",value:function(){return!_.isNull(_.get(this,"data.seltTest.status"))}},{key:"getActionsToDo",value:function(){var a=_.get(this,"data.actionsToDo",[]);return _.chain(a).map("name").flatten().value()}},{key:"hasActionToDo",value:function(a){return _.includes(this.getActionsToDo(),a)}},{key:"getActionsDone",value:function(){return _.get(this,"data.actionsDone",[])}},{key:"addActionDone",value:function(a){this.data.actionsDone.push(a)}},{key:"removeActionToDo",value:function(a){_.remove(this.data.actionsToDo,"name",a)}},{key:"getQuestionsToAnswerByName",value:function(){var a=_.get(this,"data.toAnswer",[]);return _.chain(a).map("name").flatten().value()}},{key:"hasQuestionToAnswer",value:function(a){return _.includes(this.getQuestionsToAnswerByName(),a)}},{key:"convertToRequestParams",value:function(){var b=a.FAULT_TYPES.UNKNOWN;return{actionsDone:this.data.actionsDone,answers:this.data.answers,faultType:this.faultType||b}}}]),c}();return c}]),angular.module("ovh-angular-line-diagnostics").provider("LineDiagnostics",function(){var a="$http",b="../bower_components/ovh-angular-line-diagnostics/dist",c=null,d="";this.setPathPrefix=function(a){return a&&(d=a),d},this.setProxy=function(b){return void 0!==b&&(a=b),a},this.setpollingApiOptions=function(a){return void 0!==a&&(c=a),c},this.setTranslationsPath=function(a){return void 0!==a&&(b=a),b},this.$get=["$injector","Poller","$translatePartialLoader","$translate","OvhApiXdslDiagnosticLines",function(e,f,g,h,i){var j={},k=e.get(a);return j.loadTranslations=function(){return angular.forEach([b],function(a){g.addPart(a)}),h.refresh()},j.getRunDiagnostic=function(a,b){var c={faultType:"unknown"},d=b&&b.faultType?b:angular.extend(c,b||{});return d&&d.answers&&_.forIn(d.answers,function(a,b){("true"===a||"false"===a)&&(d.answers[b]="true"===d.answers[b])}),i.v6().runDiagnostic(_.merge(a,d))},j.getCancelDiagnostic=function(a){return i.v6().cancelDiagnostic(a)},j.deletePollDiagnostic=function(){return i.v6().killPollerDiagnostic()},j.fakeSeltTest=function(a,b){return i.v6().fakeSeltDev(a,b)},j.getWaitingValidationDiagnostics=function(){var a=e.get("$q");return k.get([d,"diagnostic/getWaitingValidationDiagnostics"].join("/")).then(function(a){return a.data},function(b){return a.reject(b)})},j.pollWaitingValidationDiagnostics=function(){return f.poll([d,"diagnostic/getWaitingValidationDiagnostics"].join("/"),c,{namespace:"tools_validation_diagnostics",method:"get",interval:3e4})},j.killPollWaitingValidationDiagnostics=function(){f.kill({namespace:"tools_validation_diagnostics"})},j.validateDiagnostics=function(a,b){var c=e.get("$q");return k.post([d,"diagnostic",a,"validate"].join("/"),b).then(function(a){return a.data},function(a){return c.reject(a)})},j.runPollGetDiagnostic=function(a,b){var e={faultType:"noSync"},g=b&&b.faultType?b:angular.extend(e,b||{});return f.poll(URI.expand([d,"lines","{number}","diagnostic/run"].join("/"),a).toString(),c,{namespace:"tools_line_diagnostics",method:"post",postData:g,interval:5e3,successRule:function(a){return"waitingRobot"!==a.status}})},j}]}),angular.module("ovh-angular-line-diagnostics").run(["$templateCache",function(a){a.put("/ovh-angular-line-diagnostics/src/ovh-angular-line-diagnostics/ovh-angular-line-diagnostics.html","<div class=row><div class=col-md-6><div class=oui-progress-tracker><ol class=oui-progress-tracker__steps><li class=oui-progress-tracker__step data-ng-class=\"{\n                        'oui-progress-tracker__step_active': $ctrl.currentStep === 'detectionStep',\n                        'oui-progress-tracker__step_complete': $ctrl.currentStep !== 'detectionStep'\n                    }\"><span class=oui-progress-tracker__status><span class=oui-progress-tracker__label data-translate=tools_lineDiagnostics_detection_step></span></span></li><li class=oui-progress-tracker__step data-ng-class=\"{\n                        'oui-progress-tracker__step_active': $ctrl.currentStep === 'investigationStep',\n                        'oui-progress-tracker__step_complete': $ctrl.currentStep === 'solutionProposalStep',\n                        'oui-progress-tracker__step_disabled': $ctrl.currentStep === 'detectionStep'\n                    }\"><span class=oui-progress-tracker__status><span class=oui-progress-tracker__label data-translate=tools_lineDiagnostics_investigation_step></span></span></li><li class=oui-progress-tracker__step data-ng-class=\"{\n                        'oui-progress-tracker__step_active': $ctrl.currentStep === 'solutionProposalStep',\n                        'oui-progress-tracker__step_disabled': $ctrl.currentStep !== 'solutionProposalStep'\n                    }\"><span class=oui-progress-tracker__status><span class=oui-progress-tracker__label data-translate=tools_lineDiagnostics_solution_proposal_step></span></span></li></ol></div></div><div class=col-md-6 data-ng-if=$ctrl.currentLineDiagnostic.isOnSeltTest()><div data-ng-if=!$ctrl.loadingFakeTest><span>Simulation du test SELT (Mode debug)</span><p><oui-button variant=secondary data-on-click=\"$ctrl.fakeSeltTest('linePreloc')\">linePreloc</oui-button><oui-button variant=secondary data-on-click=\"$ctrl.fakeSeltTest('custoPreloc')\">custPreloc</oui-button><oui-button variant=secondary data-on-click=\"$ctrl.fakeSeltTest('nraPreloc')\">nraPreloc</oui-button><oui-button variant=secondary data-on-click=\"$ctrl.fakeSeltTest('failed')\">failed</oui-button></p></div><div data-ng-if=$ctrl.loadingFakeTest><oui-spinner size=m></oui-spinner></div></div></div><div class=row><toast-message></toast-message></div><div class=row data-ng-if=\"$ctrl.currentLineDiagnostic.status !== 'problem'\"><div data-ng-if=\"$ctrl.currentStep === 'detectionStep'\" data-ng-include=\"'/ovh-angular-line-diagnostics/src/ovh-angular-line-diagnostics/steps/ovh-angular-line-diagnostics-detection-step.html'\"></div><div data-ng-if=\"$ctrl.currentStep === 'investigationStep'\" data-ng-include=\"'/ovh-angular-line-diagnostics/src/ovh-angular-line-diagnostics/steps/ovh-angular-line-diagnostics-investigation-step.html'\"></div><div data-ng-if=\"$ctrl.currentStep === 'solutionProposalStep'\" data-ng-include=\"'/ovh-angular-line-diagnostics/src/ovh-angular-line-diagnostics/steps/ovh-angular-line-diagnostics-solution-proposal-step.html'\"></div></div><div class=row data-ng-if=\"$ctrl.currentLineDiagnostic.status === 'problem'\"><oui-message data-type=error><span data-translate=tools_lineDiagnostics_diagnostic_critical_problem></span></oui-message></div>"),a.put("/ovh-angular-line-diagnostics/src/ovh-angular-line-diagnostics/steps/ovh-angular-line-diagnostics-detection-step.html",'<div class=col-md-8 data-ng-if="$ctrl.incidentTestProgression < 100"><span data-translate=tools_lineDiagnostics_detection_step_test></span><oui-progress><oui-progress-bar data-type=info data-value=$ctrl.incidentTestProgression></oui-progress-bar></oui-progress></div><div class="col-md-4 row" data-ng-if="$ctrl.currentLineDiagnostic.status === \'waitingRobot\'"><div class="d-inline-block col-xs-1"><oui-spinner size=s></oui-spinner></div><p class=d-inline-block data-translate=tools_lineDiagnostics_waitingRobot></p></div><div class=col-md-8 data-ng-if="$ctrl.incidentTestProgression === 100 &&\n                 $ctrl.currentLineDiagnostic"><div data-ng-if="$ctrl.currentLineDiagnostic.hasQuestionToAnswer(\'modemIsSynchronized\')"><form class=form-group novalidate name=firstStepQuestionForm><oui-field data-label="{{:: \'tools_lineDiagnostics_detection_step_modem_question\' | translate }}" data-label-popover="{{:: \'tools_lineDiagnostics_detection_step_modem_question_help\' | translate }}"><oui-radio-toggle-group class=d-inline-block data-model=$ctrl.currentLineDiagnostic.data.answers.modemIsSynchronized data-on-change=$ctrl.startPoller()><oui-radio data-value=true><span data-translate=tools_lineDiagnostics_detail_yes></span></oui-radio><oui-radio data-value=false><span data-translate=tools_lineDiagnostics_detail_no></span></oui-radio><oui-spinner class=ml-2 data-ng-if=$ctrl.loading data-size=s></oui-spinner></oui-radio-toggle-group></oui-field></form></div><div data-ng-if="$ctrl.currentLineDiagnostic.faultType !== \'unknown\' &&\n                     $ctrl.currentLineDiagnostic.status !== \'waitingRobot\'"><oui-message data-type=warning><span data-translate=tools_lineDiagnostics_detection_step_warning></span></oui-message><div data-ng-if="$ctrl.currentLineDiagnostic.faultType === \'noSync\'"><label for=unplugModem class=oui-label data-translate=tools_lineDiagnostics_detection_step_modem_unplug_request></label><oui-button id=unplugModem data-variant=secondary data-variant-nav=next data-on-click="$ctrl.setModemUnplug(\'unplugModem\')"><span data-translate=tools_lineDiagnostics_detection_step_modem_unplug_confirm></span></oui-button><oui-spinner class=ml-2 data-ng-if=$ctrl.loading data-size=s></oui-spinner></div><div data-ng-if="$ctrl.currentLineDiagnostic.faultType === \'alignment\' ||\n                         $ctrl.currentLineDiagnostic.faultType === \'syncLossOrLowBandwidth\'"><oui-button data-text="{{:: \'tools_lineDiagnostics_detection_step_continue\' | translate }}" data-variant=secondary data-variant-nav=next data-on-click=$ctrl.goToInvestigationStep()><span data-translate=tools_lineDiagnostics_detection_step_continue></span></oui-button><oui-spinner class=ml-2 data-ng-if=$ctrl.loading data-size=s></oui-spinner></div></div></div>'),a.put("/ovh-angular-line-diagnostics/src/ovh-angular-line-diagnostics/steps/ovh-angular-line-diagnostics-investigation-step.html",'<div class=col-md-6 data-ng-if=!$ctrl.currentLineDiagnostic.isOnSeltTest()><div class=form-group><p><span data-translate=tools_lineDiagnostics_header_investigation_step_title></span><oui-spinner data-ng-if=$ctrl.loading data-size=s></oui-spinner></p><div class=mb-5 data-ng-if="$ctrl.currentLineDiagnostic.data.actionsDone && $ctrl.currentLineDiagnostic.data.actionsDone.length > 0"><p data-ng-repeat="actionDone in $ctrl.currentLineDiagnostic.getActionsDone()"><span class="oui-icon oui-icon-success" aria-hidden=true></span> <span data-translate="{{:: \'tools_lineDiagnostics_investigation_step_action_\' + actionDone + \'_done_text\' }}"></span></p></div><div data-ng-if="$ctrl.currentLineDiagnostic.data.actionsToDo &&\n                         $ctrl.currentLineDiagnostic.data.actionsToDo.length > 0 &&\n                         $ctrl.getNextAction()"><label for="{{ $ctrl.getNextAction() }}" class=oui-label><span data-translate="{{ \'tools_lineDiagnostics_investigation_step_action_\' + $ctrl.getNextAction() + \'_title\' }}"></span><oui-popover data-ng-if="$ctrl.getNextAction() === \'checkFilter\'"><button type=button class=oui-popover-button oui-popover-trigger></button><oui-popover-content><p class=text-center data-translate=tools_lineDiagnostics_investigation_step_action_checkFilter_example></p><img src="assets/images/diagnostic/filtre-adsl.png"></oui-popover-content></oui-popover></label><oui-button data-variant=secondary data-on-click=$ctrl.addActionDone($ctrl.getNextAction())><span data-translate="{{ \'tools_lineDiagnostics_investigation_step_action_\' + $ctrl.getNextAction() + \'_text\' }}"></span></oui-button><oui-button data-variant=secondary data-on-click=$ctrl.showWarning() data-ng-if=$ctrl.isActionAQuestion($ctrl.getNextAction())><span data-translate=tools_lineDiagnostics_detail_no></span></oui-button></div><div data-ng-if="$ctrl.currentLineDiagnostic.data.toAnswer &&\n                         $ctrl.getInvestigationStepQuestions().length > 0" data-ng-repeat="question in $ctrl.getInvestigationStepQuestions()"><oui-field data-label="{{:: \'tools_lineDiagnostics_investigation_step_question_\' + question.name + \'_title\' | translate }}"><oui-radio-toggle-group class=d-inline-block data-model=$ctrl.currentLineDiagnostic.data.answers[question.name] data-ng-if="question.type === \'boolean\'" data-on-change=$ctrl.startPoller()><oui-radio data-value=true><span data-translate=tools_lineDiagnostics_detail_yes></span></oui-radio><oui-radio data-value=false><span data-translate=tools_lineDiagnostics_detail_no></span></oui-radio></oui-radio-toggle-group></oui-field></div></div></div><div class=col-md-8><oui-message data-type=warning data-ng-if=$ctrl.actionRequired><span data-translate=tools_lineDiagnostics_action_required_action></span></oui-message></div><div class="col-md-5 oui-message oui-message_info" data-ng-if="$ctrl.currentLineDiagnostic.hasQuestionToAnswer(\'resolvedAfterTests\')"><p data-translate=tools_lineDiagnostics_investigation_step_action_is_problem_solved></p><oui-radio-toggle-group class=d-inline-block data-model=$ctrl.currentLineDiagnostic.data.answers.resolvedAfterTests data-on-change=$ctrl.startPoller()><oui-radio data-value=true><span data-translate=tools_lineDiagnostics_detail_yes></span></oui-radio><oui-radio data-value=false><span data-translate=tools_lineDiagnostics_detail_no></span></oui-radio></oui-radio-toggle-group></div><div class=col-md-6 data-ng-if=$ctrl.currentLineDiagnostic.isOnSeltTest()><oui-spinner size=m></oui-spinner><p data-translate=tools_lineDiagnostics_header_investigation_step_selt_test></p></div>'),a.put("/ovh-angular-line-diagnostics/src/ovh-angular-line-diagnostics/steps/ovh-angular-line-diagnostics-solution-proposal-step.html",'<div class=col-md-12 data-ng-if=$ctrl.currentLineDiagnostic.data.answers.resolvedAfterTests><div class=row><img class=col-md-1 src=assets/images/diagnostic/human-good.svg width=120 height="120"> <span class=col-md-8><p class=oui-header_2 data-translate=tools_lineDiagnostics_solution_proposal_step_problem_solved_title></p><p data-translate=tools_lineDiagnostics_solution_proposal_step_problem_solved_subtitle></p><oui-button data-variant=secondary data-text="{{:: \'tools_lineDiagnostics_solution_proposal_step_exit_diagnostic\' | translate }}"></oui-button></span></div></div><div data-ng-if="!$ctrl.showRequestForm && !$ctrl.currentLineDiagnostic.data.answers.resolvedAfterTests"><div class=row><img class=col-md-1 src=assets/images/diagnostic/human-think.svg width=120 height="120"> <span class=col-md-8><p class=oui-header_2 data-translate=tools_lineDiagnostics_solution_proposal_step_problem_to_resolve_title></p><p data-translate=tools_lineDiagnostics_solution_proposal_step_problem_to_resolve_subtitle></p><oui-button data-variant=secondary data-text="{{:: \'tools_lineDiagnostics_solution_proposal_step_fill_request_form\' | translate }}" data-on-click="$ctrl.showRequestForm = true"></oui-button></span></div></div><div class=col-md-12 data-ng-if=$ctrl.showRequestForm><form name=requestInterventionForm novalidate data-ng-if="$ctrl.currentLineDiagnostic.data.toAnswer && $ctrl.currentLineDiagnostic.data.toAnswer.length > 0"><div data-ng-repeat="question in $ctrl.currentLineDiagnostic.data.toAnswer"><oui-field data-label="{{:: \'tools_lineDiagnostics_solution_proposal_step_request_form_question_\' + question.name + \'_title\' | translate }}"><input class=oui-input name="{{:: question.name }}" value="{{ question.defaultValue }}" data-ng-model=$ctrl.currentLineDiagnostic.answers[question.name] data-ng-required="{{:: question.required }}" data-ng-if="question.type === \'string\'"> <input class=oui-input name="{{:: question.name }}" value="{{ question.defaultValue }}" data-ng-model=$ctrl.currentLineDiagnostic.answers[question.name] data-ng-required="{{:: question.required }}" data-ng-if="question.type === \'long\'"><oui-radio-toggle-group class=d-inline-block data-model=$ctrl.currentLineDiagnostic.answers[question.name] data-ng-if="question.type === \'boolean\'"><oui-radio data-value=true><span data-translate=tools_lineDiagnostics_detail_yes></span></oui-radio><oui-radio data-value=false><span data-translate=tools_lineDiagnostics_detail_no></span></oui-radio></oui-radio-toggle-group><oui-calendar data-ng-if="question.type === \'datetime\'" data-name="{{:: question.name }}" data-model=$ctrl.currentLineDiagnostic.data.answers[question.name]></oui-calendar><oui-select data-ng-if="question.type === \'enum\'" name="{{:: question.name }}" data-model=$ctrl.currentLineDiagnostic.data.answers[question.name] data-items=$ctrl.enumQuestions[question.name] data-align=start data-ng-required=question.required><span ng-bind=$item></span></oui-select></oui-field></div></form></div>')}]);