<!-- PROGRESS BAR -->
<div class="col-md-8"
     data-ng-if="$ctrl.incidentTestProgression < 100">
    <span data-translate="tools_lineDiagnostics_detection_step_test"></span>
    <oui-progress>
        <oui-progress-bar data-type="info"
                          data-value="$ctrl.incidentTestProgression"></oui-progress-bar>
    </oui-progress>
</div>

<div class="col-md-4 row"
     data-ng-if="$ctrl.currentLineDiagnostic.status === 'waitingRobot'">
    <div class="d-inline-block col-xs-1">
        <oui-spinner size="s"></oui-spinner>
    </div>
    <p class="d-inline-block"
       data-translate="tools_lineDiagnostics_waitingRobot"></p>
</div>

<div class="col-md-8"
     data-ng-if="$ctrl.incidentTestProgression === 100 &&
                 $ctrl.currentLineDiagnostic">
    <div data-ng-if="$ctrl.currentLineDiagnostic.hasQuestionToAnswer('modemIsSynchronized')">
        <form class="form-group"
              novalidate name="firstStepQuestionForm">
            <oui-field data-label="{{:: 'tools_lineDiagnostics_detection_step_modem_question' | translate }}"
                       data-label-popover="{{:: 'tools_lineDiagnostics_detection_step_modem_question_help' | translate }}">
                <oui-radio-toggle-group class="d-inline-block"
                                        data-model="$ctrl.currentLineDiagnostic.data.answers.modemIsSynchronized"
                                        data-on-change="$ctrl.startPoller()">
                    <oui-radio data-value="true">
                        <span data-translate="tools_lineDiagnostics_detail_yes"></span>
                    </oui-radio>
                    <oui-radio data-value="false">
                        <span data-translate="tools_lineDiagnostics_detail_no"></span>
                    </oui-radio>
                    <oui-spinner class="ml-2" data-ng-if="$ctrl.loading" data-size="s"></oui-spinner>
                </oui-radio-toggle-group>
            </oui-field>
        </form>
    </div>

    <div data-ng-if="$ctrl.currentLineDiagnostic.faultType !== 'unknown' &&
                     $ctrl.currentLineDiagnostic.status !== 'waitingRobot'">
        <oui-message data-type="warning">
            <span data-translate="tools_lineDiagnostics_detection_step_warning"></span>
        </oui-message>
        <div data-ng-if="$ctrl.currentLineDiagnostic.faultType === 'noSync'">
            <label for="unplugModem"
                   class="oui-label"
                   data-translate="tools_lineDiagnostics_detection_step_modem_unplug_request"></label>
            <oui-button id="unplugModem"
                        data-variant="secondary"
                        data-variant-nav="next"
                        data-on-click="$ctrl.setModemUnplug('unplugModem')">
                <span data-translate="tools_lineDiagnostics_detection_step_modem_unplug_confirm">
            </oui-button>
            <oui-spinner class="ml-2" data-ng-if="$ctrl.loading" data-size="s"></oui-spinner>
        </div>
        <div data-ng-if="$ctrl.currentLineDiagnostic.faultType === 'alignment' ||
                         $ctrl.currentLineDiagnostic.faultType === 'syncLossOrLowBandwidth'">
            <oui-button data-text="{{:: 'tools_lineDiagnostics_detection_step_continue' | translate }}"
                        data-variant="secondary"
                        data-variant-nav="next"
                        data-on-click="$ctrl.goToInvestigationStep()">
                <span data-translate="tools_lineDiagnostics_detection_step_continue">
            </oui-button>
            <oui-spinner class="ml-2" data-ng-if="$ctrl.loading" data-size="s"></oui-spinner>
        </div>
    </div>
</div>
